```mermaid
%% TimesBlock 子图
graph TimesBlock
    direction LR
    class TimesBlock subgraph-bg
    E1[FFT_for_Period] --> E2[获取前k个周期]:::process
    E2 --> F1[循环k次周期处理]:::process
    F1 --> F2{"是否需要填充?"}:::process
    F2 -->|是| F3[填充至周期整数倍]:::process
    F2 -->|否| F4[直接使用原长度]:::process
    F3 & F4 --> F5["维度重塑: (B, T, C) → (B, G, P, C)"]:::process
    F5 --> F6[2D卷积模块 (Inception Block)]:::process
    F6 --> F7["维度恢复: (B, G, P, C) → (B, T', C)"]:::process
    F7 --> F8[结果堆叠]:::process
    F8 --> F9[加权聚合 (Softmax权重)]:::process
    F9 --> F10[残差连接: + 输入]:::process
end

```